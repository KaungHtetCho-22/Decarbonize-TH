name: Notify LINE Group on GitHub Push

on:
  push:
    branches:
      - data-eda  # Change this to your tracking branch

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send LINE Notification
        run: |
          BRANCH_NAME=$(echo ${{ github.ref }} | sed 's/refs\/heads\///')
          COMMIT_MESSAGE="${{ github.event.head_commit.message }}"
          COMMIT_URL="https://github.com/${{ github.repository }}/commit/${{ github.sha }}"
          
          MESSAGE="ğŸ”” *GitHub Push Notification*\n\n
          ğŸ“Œ *Repository:* ${{ github.repository }}\n
          ğŸ“‚ *Branch:* $BRANCH_NAME\n
          ğŸ”— *Commit:* [${COMMIT_HASH}](${COMMIT_URL})\n
          ğŸ“ *Message:* ${COMMIT_MESSAGE}"
          
          # Send one single notification
          curl -X POST "https://notify-api.line.me/api/notify" \
            -H "Authorization: Bearer ${{ secrets.LINE_NOTIFY_TOKEN }}" \
            -F "message=${MESSAGE}"
